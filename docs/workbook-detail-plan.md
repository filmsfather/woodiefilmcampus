# 워크북 상세 · 필터/검색 UX 요구사항 정리

## 1. 상세 페이지 목표
- 교사가 생성한 워크북의 메타데이터와 문항을 한 화면에서 검토하고 수정/출제를 준비할 수 있도록 한다.
- 유형별 구성(SRS/PDF/서술/감상/강의)에 맞는 추가 정보와 액션(SRS 미리보기, 감상 필터 등)을 제공한다.
- 향후 "출제", "복제", "삭제" 등 액션 버튼을 배치할 수 있는 레이아웃을 확보한다.

### 1.1 주요 섹션
1. **헤더**
   - 제목, 과목, 유형 배지, 주차/공통 라벨, 태그 목록.
   - 생성일/수정일, 작성자 정보(교사 이름/이메일).
   - 액션 버튼: 문제집 출제(Assign), 편집, 복제, 삭제(권한 체크 필요).

2. **유형별 설정 블록**
   - SRS: 복수 정답 허용 여부, 문항 수, 반복 간격 안내.
   - PDF: 제출 안내 텍스트, 첨부 파일(추후 업로드 기능 연동) 다운로드 링크.
   - 서술: 작성 안내, 글자수 제한.
   - 영화 감상: 필수 감상 노트 수, 필터(국가/감독/장르/하위장르).
   - 인터넷 강의: 유튜브 링크(미리보기), 요약 안내.

3. **문항 리스트**
   - 번호, 문항 내용, 해설/참고 텍스트.
   - SRS 유형일 경우 보기 목록(정답 표시) 노출.
   - 이미지/PDF 등 첨부 자산이 있는 경우 썸네일/다운로드 링크.
   - 편집/삭제 버튼(추후 inline 편집 또는 edit 페이지 이동).

4. **히스토리/사용 현황(후속)**
   - 해당 워크북이 출제된 Assignments 리스트(마감일, 반, 진행률)로 확장 예정.

## 2. 목록 필터/검색 UX 요구사항
- **Search Bar**: 제목, 태그, 주차/라벨 텍스트 전체 검색.
- **Filters**:
  - 과목(연출/작법/연구/통합) 멀티 선택.
  - 유형(SRS/PDF/서술/감상/강의) 멀티 선택.
  - 주차/공통 라벨: 텍스트 입력 또는 드롭다운(최근 사용).
  - 생성일/수정일 범위 선택(캘린더, 기본=최근 30일).
  - 태그: chips 선택(최근 10개 + 검색).
- **정렬**: 기본=최신 수정순. 옵션=제목(가나다), 문항 수, 과목.
- **Empty State**: 필터 조건과 함께 결과 없음 안내 + 필터 초기화 버튼.
- **Pagination**: 초기 구현은 20개 단위 무한스크롤 또는 "더 보기" 버튼.

## 3. 데이터 요구사항/쿼리
- 상세 페이지: `workbooks` + `workbook_items` + (SRS) `workbook_item_choices` + 첨부자산(차후 `workbook_item_media`).
- 목록 페이지: 선택된 필터에 기반한 `select` + `order` + `ilike` + `contains`. 태그 검색 시 `tags ?| array[...]` 활용.
- 문항 수: `workbook_items.count()`를 현재처럼 join, 필요 시 `select('*, workbook_items(count)')` 혹은 뷰.
- 향후 Assignments 연결 위해 `assignments(count)` join 또는 뷰 생성 계획.

## 4. 라우트 구조 제안
```
/dashboard/workbooks
/dashboard/workbooks/new
/dashboard/workbooks/[workbookId]
/dashboard/workbooks/[workbookId]/edit (추후)
```
- 상세 페이지에서 `edit`/`assign`/`duplicate` 버튼 링크 제공.
- Layout 컴포넌트에서 필터 상태(Zustand or search params) 유지, 목록-상세 왕복 시 Scroll 위치 기억 고려.

## 5. 후속 TODO
- 상세 페이지 마크업 및 데이터 Fetching 구현.
- 목록 필터 UI 컴포넌트(`Select`, `Checkbox`, Tag chips) 설계.
- Supabase 쿼리 작성(동적 필터) + RLS 정책 검증.
- 워크북 복제/삭제 서버 액션 정의.

